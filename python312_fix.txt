# Python 3.12 - Naprawa błędu "No module named 'distutils'"

## 🐍 Problem

W **Python 3.12** moduł `distutils` został usunięty z biblioteki standardowej, co powoduje błędy podczas instalacji pakietów:

```
ModuleNotFoundError: No module named 'distutils'
```

## ✅ Rozwiązania (wybierz jedno)

### **Opcja 1: Automatyczna naprawa (REKOMENDOWANA)**

```bash
# Uruchom nasz skrypt naprawy
chmod +x setup.sh
./setup.sh
```

### **Opcja 2: Ręczna naprawa krok po kroku**

```bash
# 1. Upgrade pip i setuptools
python3 -m pip install --upgrade pip

# 2. Zainstaluj setuptools z obsługą distutils  
python3 -m pip install --upgrade "setuptools>=68.0.0" wheel

# 3. Zainstaluj zależności po kolei
python3 -m pip install fastapi==0.104.1
python3 -m pip install uvicorn[standard]==0.24.0
python3 -m pip install jinja2==3.1.2
python3 -m pip install python-multipart==0.0.6
python3 -m pip install pandas==2.1.3
python3 -m pip install numpy==1.25.2
python3 -m pip install lxml==4.9.3
python3 -m pip install paramiko==3.3.1
python3 -m pip install requests==2.31.0
python3 -m pip install urllib3==2.0.7
python3 -m pip install pydantic==2.5.0
python3 -m pip install py7zr==0.20.6
python3 -m pip install aiofiles==23.2.1
python3 -m pip install python-dotenv==1.0.0
```

### **Opcja 3: Środowisko wirtualne (izolacja)**

```bash
# Utwórz nowe venv
python3 -m venv ncpyvisual_env
source ncpyvisual_env/bin/activate  # Linux/Mac
# ncpyvisual_env\Scripts\activate     # Windows

# Upgrade podstawowych narzędzi
pip install --upgrade pip setuptools wheel

# Instaluj zależności
pip install -r requirements.txt
```

### **Opcja 4: System package manager**

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3-setuptools python3-wheel python3-pip

# CentOS/RHEL/Fedora  
sudo dnf install python3-setuptools python3-wheel python3-pip
# lub: sudo yum install python3-setuptools python3-wheel python3-pip

# Po instalacji systemowich pakietów:
pip3 install -r requirements.txt
```

## 🧪 Test naprawy

```bash
# Sprawdź czy problem został rozwiązany
python3 -c "
try:
    import setuptools
    import fastapi
    import uvicorn
    print('✅ Python 3.12 fix działa!')
except ImportError as e:
    print(f'❌ Nadal błąd: {e}')
"
```

## ⚡ Szybka diagnoza

```bash
# Sprawdź wersję Python
python3 --version

# Sprawdź czy setuptools jest zainstalowany
python3 -c "import setuptools; print(f'setuptools: {setuptools.__version__}')"

# Lista zainstalowanych pakietów
pip3 list | grep -E "(setuptools|wheel|fastapi)"
```

## 🔧 Alternatywne rozwiązania

### **Jeśli nadal masz problemy:**

```bash
# 1. Wyczyść cache pip
pip3 cache purge

# 2. Force reinstall setuptools
pip3 uninstall -y setuptools wheel
pip3 install --no-cache-dir setuptools wheel

# 3. Użyj --user jeśli masz problemy z uprawnieniami
pip3 install --user setuptools wheel

# 4. Sprawdź czy masz konflikt wersji
pip3 check
```

### **Emergency workaround (dla deweloperów):**

```bash
# Jeśli nic nie działa, można tymczasowo zainstalować distutils
pip3 install setuptools-distutils

# LUB użyć starszego Python
python3.11 -m venv old_python_env
source old_python_env/bin/activate
pip install -r requirements.txt
```

## 📚 Tło techniczne

### **Co się stało:**
- Python 3.12 usunął `distutils` z biblioteki standardowej
- Wiele pakietów nadal próbuje importować `distutils` 
- `setuptools` musi zapewnić kompatybilność wsteczną

### **Dlaczego nasze rozwiązanie działa:**
1. **setuptools >= 68.0.0** zawiera `distutils` compatibility layer
2. **wheel** zapewnia nowoczesny build system
3. **Kolejność instalacji** unika konfliktów zależności

## 🚀 Po naprawie

```bash
# Uruchom aplikację
./start.sh

# LUB ręcznie:
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

## 📞 Pomoc

Jeśli nadal masz problemy:

1. **Sprawdź logi**: `python3 -m pip install -v setuptools`
2. **Użyj naszego setup.sh**: `./setup.sh`
3. **Spróbuj venv**: izolowane środowisko
4. **Downgrade Python**: do 3.11 jako ostateczność

---
**💡 Tip**: Problem dotyczy tylko Python 3.12+. Starsze wersje działają normalnie.
